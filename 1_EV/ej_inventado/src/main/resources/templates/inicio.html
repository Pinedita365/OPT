<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TriPing - Actividades del viaje</title>
    <link rel="stylesheet" href="css/styleActividades.css">
</head>

<body>

    <!-- HEADER -->
    <header class="header">
        <div class="header-left"></div>
        <div class="header-center">
            <h1>TriPing</h1>
        </div>
        <div class="header-right">
            <span class="usuario" th:text="${session.nombre}">Usuario</span>
        </div>
    </header>

    <!-- IMAGEN DE ENTRADA (decorativa) -->
    <section class="imagen-entrada"></section>

    <!-- INFORMACI√ìN DEL VIAJE Y CONTROLES -->
    <section class="info-viaje">
        <div class="datos-viaje">
            <div class="fechas">
                Inicio: <span th:text="${session.fEntrada}">01/01/2026</span> ‚Äî
                Fin: <span th:text="${session.fSalida}">10/01/2026</span>
            </div>
            <div class="localidad">
                Localidad: <span th:text="${session.ciudad}">Madrid</span>
            </div>
        </div>

        <div class="controles">
            <form action="" method="get">
                <label for="ordenar">Ordenar por:</label>
                <select id="ordenar" name="orden">
                    <option value="defecto" th:selected="${session.orden == 'defecto'}">Por defecto</option>
                    <option value="precio" th:selected="${session.orden == 'precio'}">Precio</option>
                </select>
                <input type="submit" value="Ordenar">
            </form>

            <div class="contador">
                Actividades a√±adidas: <span th:text="${session.cont}">0</span>
            </div>
        </div>
    </section>

    <!-- TIPO DE ACTIVIDAD -->
    <section class="tipo-actividad">
        <h2>Tipo de actividad</h2>
        <div class="opciones-actividad">
            <form action="" method="get">
                <input type="hidden" name="tipo" value="DEPORTIVA">
                <input class="button" type="submit" value="Deportiva">
            </form>
            <form action="" method="get">
                <input type="hidden" name="tipo" value="GASTRONOMICA">
                <input class="button" type="submit" value="Gastron√≥mica">
            </form>
            <form action="" method="get">
                <input type="hidden" name="tipo" value="TURISTICA">
                <input class="button" type="submit" value="Tur√≠stica">
            </form>
            <form action="" method="get">
                <input type="hidden" name="tipo" value="all">
                <input class="button" type="submit" value="Todas las actividades">
            </form>
        </div>
    </section>

    <!-- ACTIVIDADES + CARRITO -->
    <div class="contenedor-principal">

        <!-- Secci√≥n de actividades -->
        <section class="contenedor-actividades">
            <div th:each="act : ${listaAct}" 
                 th:classappend="${session.tipo != 'all' and act.tipo.name() != session.tipo} ? 'oculto' : 'card-actividad'">
                <img th:src="@{${act.img}}" alt="Imagen de la actividad">
                <h3 th:text="${act.nombre}">Nombre Actividad</h3>
                <p th:text="${act.getBreveDesc()}">Descripci√≥n breve</p>
                <p><strong>Ciudad:</strong> <span th:text="${act.ciudad}">Ciudad</span></p>
                <div class="botones-card">
                    <form th:action="@{/verMas}" method="get">
                        <input type="hidden" name="id" th:value="${act.id}">
                        <input class="btn-detalles" type="submit" value="Ver Detalles">
                    </form>
                    <form th:action="@{/inicio}" method="get">
                        <input type="hidden" name="a√±adirCarrito" th:value="${act.id}">
                        <input class="btn-anadir" type="submit" value="A√±adir actividad">
                    </form>
                </div>
            </div>
        </section>

        <!-- Carrito lateral -->
        <aside class="carrito">
            <h2>üõçÔ∏è Tu Carrito</h2>

            <div th:if="${session.carrito == null or session.carrito.isEmpty()}">
                <p>No hay actividades en el carrito a√∫n.</p>
            </div>

            <ul th:if="${session.carrito != null and !session.carrito.isEmpty()}">
                <li th:each="act : ${session.carrito}">
                    <span th:text="${act.nombre}">Actividad</span>
                    <form th:action="@{/eliminarCarrito}" method="get" style="display:inline;">
                        <input type="hidden" name="idEliminar" th:value="${act.id}">
                        <input type="submit" class="btn-quitar" value="‚ùå">
                    </form>
                </li>
            </ul>

            <div class="precio-carrito">
                <strong>Precio total: <span th:text="${session.precioCarro}">0</span>‚Ç¨</strong>
            </div>

            <div class="carrito-acciones" th:if="${session.carrito != null and !session.carrito.isEmpty()}">
                <form th:action="@{/confirmarCarrito}" method="get">
                    <button type="submit" class="btn-confirmar">Confirmar viaje</button>
                </form>
            </div>
        </aside>

    </div>

    <footer class="footer">
        <p>&copy; 2025 TriPing ‚Äî Tu planificador de viajes</p>
    </footer>

</body>

</html>
